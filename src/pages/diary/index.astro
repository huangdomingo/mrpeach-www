---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// 取得日記並依照日期排序
const posts = (await getCollection("diary")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="產地日記｜拉拉山水蜜桃達人">
  <section class="bg-pink-50 py-12 text-center">
    <h1 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-4">產地日記</h1>
    <p class="text-slate-600">紀錄果園裡的每一分努力與大地的回報</p>
  </section>

  <section class="max-w-5xl mx-auto px-4 py-16">
    <div class="grid gap-8 md:grid-cols-2">
      {
        posts.map((post) => (
          <article class="group bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-xl transition-all duration-300">
            <a
              href={`/diary/${post.slug}`}
              class="block h-full p-8 flex flex-col"
            >
              <div class="flex items-center gap-2 text-pink-600 text-sm font-bold mb-4">
                <span class="bg-pink-100 px-3 py-1 rounded-full">
                  {post.data.pubDate.toLocaleDateString("zh-TW")}
                </span>
                <span>• 阿義老闆分享</span>
              </div>
              <h2 class="text-xl font-bold text-slate-900 group-hover:text-pink-600 mb-4">
                {post.data.title}
              </h2>
              <p class="text-slate-600 line-clamp-3 text-sm mb-6">
                {post.data.description}
              </p>
              <div class="mt-auto flex items-center text-pink-600 font-bold text-sm">
                閱讀全文{" "}
                <span class="ml-2 group-hover:translate-x-1 transition-transform">
                  →
                </span>
              </div>
            </a>
          </article>
        ))
      }
    </div>
  </section>
</BaseLayout>
